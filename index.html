<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { 
    getFirestore, 
    doc, 
    setDoc, 
    onSnapshot 
  } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  /* ==========================
     CONFIG FIREBASE
  ========================== */

  const firebaseConfig = {
    apiKey: "AIzaSyA0ffa4Nfa7kGLyaEcAocU9YzIhzmx3SkA",
    authDomain: "araujo-exploitation.firebaseapp.com",
    projectId: "araujo-exploitation",
    storageBucket: "araujo-exploitation.firebasestorage.app",
    messagingSenderId: "292878114487",
    appId: "1:292878114487:web:2a450227310e970ce1b732"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // ⚠️ Document principal magasin
  const docRef = doc(db, "magasin", "data_globale");

  /* ==========================
     BASE LOCALE
  ========================== */

  window.db_local = {
    frais: [],
    reception: [],
    pvp: [],
    salad: [],
    trace: [],
    temp_log: [],
    checklist_answers: {},
    cleaning_log: {},
    cleaning: [
