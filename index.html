<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Store Master Cloud v25.0</title>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, doc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  // --- CONFIGURATION FIREBASE ARAUJO EXPLOITATION ---
  const firebaseConfig = {
    apiKey: "AIzaSyA0ffa4Nfa7kGLyaEcAocU9YzIhzmx3SkA",
    authDomain: "araujo-exploitation.firebaseapp.com",
    projectId: "araujo-exploitation",
    storageBucket: "araujo-exploitation.firebasestorage.app",
    messagingSenderId: "292878114487",
    appId: "1:292878114487:web:2a450227310e970ce1b732"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const docRef = doc(db, "magasin", "data_globale");

  window.db_local = {
    frais: [], reception: [], pvp: [], salad: [], trace: [], temp_log: [],
    checklist_answers: {}, cleaning_log: {},
    cleaning: [
        {id:1, name:"Cuisine", tasks:[{n:"Sol", days:[0,1,2,3,4,5,6], freq:1}]},
        {id:2, name:"Magasin", tasks:[{n:"Tapis Caisse", days:[0,1,2,3,4,5,6], freq:1}]}
    ],
    config: {
        trace: ["Croissants", "Pains"], 
        suppliers: ["Scapalsace", "Boulangerie Locale"],
        frigos: ["Mural", "Réserve"], 
        pvp: ["Baguette", "Croissant", "Pain Choc"], 
        salad: ["Tomates", "Oeufs", "Thon"],
        questions: ["Rideau fermé ?", "Lumières éteintes ?"]
    }
  };

  window.saveToCloud = async () => {
    await setDoc(docRef, window.db_local);
  };

  onSnapshot(docRef, (snap) => {
    if (snap.exists()) {
      window.db_local = snap.data();
      refreshUI();
    }
  });
</script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<style>
  :root { --bg:#f1f5f9; --blue:#2563eb; --red:#ef4444; --green:#10b981; --radius:16px; }
  body { margin:0; background:#cbd5e1; font-family: system-ui; display:flex; justify-content:center; }
  #app-container { width:100%; max-width:600px; background:var(--bg); min-height:100vh; position:relative; padding-bottom:100px; }
  header { padding:15px; background:white; display:flex; justify-content:space-between; align-items:center; position:sticky; top:0; z-index:100; border-bottom:1px solid #ddd; }
  .grid-menu { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; padding: 16px; }
  .module-card { background: white; border-radius: 20px; padding: 20px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.05); cursor: pointer; }
  .module-card i { font-size:30px; margin-bottom:10px; color:var(--blue); }
  .card { background:white; padding:20px; border-radius:var(--radius); margin:15px; box-shadow:0 2px 5px rgba(0,0,0,0.1); position:relative; }
  .hidden { display:none !important; }
  .btn-main { width:100%; padding:15px; border-radius:12px; border:none; background:var(--blue); color:white; font-weight:bold; cursor:pointer; }
  .list-row { display:flex; justify-content:space-between; align-items:center; padding:10px 0; border-bottom:1px solid #eee; }
  .item-img { width:50px; height:50px; border-radius:8px; object-fit:cover; margin-right:10px; background:#eee; }
  .body-admin .adm-tools { display:inline-flex !important; }
  .adm-tools { display:none; gap:5px
