<script>
// Ajoute ces fonctions dans window.app.pvp
window.app.pvp.changeQty = function(id, delta) {
    let idx = window.app.data.pvpStock.findIndex(x => x.id == id);
    if(idx > -1) {
        let newQty = parseInt(window.app.data.pvpStock[idx].qty) + delta;
        if(newQty <= 0) {
            if(confirm("Supprimer ce produit du rayon ?")) {
                window.app.data.pvpStock.splice(idx, 1);
            }
        } else {
            window.app.data.pvpStock[idx].qty = newQty;
        }
        window.app.save();
    }
};

// Dans la partie render() du stock, le HTML devient :
/*
<div style="display:flex; align-items:center; gap:10px; margin-left:10px;">
    <button onclick="event.stopPropagation(); app.pvp.changeQty(${i.id}, -1)" style="width:30px; height:30px; border-radius:5px; border:1px solid #ddd; background:#fff;">-</button>
    <b style="font-size:18px; min-width:20px; text-align:center;">${i.qty}</b>
    <button onclick="event.stopPropagation(); app.pvp.changeQty(${i.id}, 1)" style="width:30px; height:30px; border-radius:5px; border:1px solid #ddd; background:#fff;">+</button>
</div>
*/
</script>
